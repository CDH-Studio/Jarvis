!function(e){e.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{version:"4.1.2",jqmVersion:"1.4.5",bootstrapVersion:"3.3.7",bootstrap4Version:"4.0.0a6",jqmuiWidgetVersion:"1.11.4",theme:!1,themeDefault:"a",themeHeader:"a",themeSetButton:"a",themeCloseButton:"secondary",mode:!1,transition:"fade",useAnimation:!0,hideInput:!1,hideContainer:!1,lockInput:!0,zindex:"1100",clickEvent:"click",clickEventAlt:"click",useKinetic:!0,defaultValue:!1,showInitialValue:!0,linkedField:!1,linkedFieldFormat:"%J",popupPosition:!1,popupButtonPosition:"left",popupForceX:!1,popupForceY:!1,useModal:!0,useModalTheme:"b",useInline:!1,useInlineBlind:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!1,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,useTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!0,beforeToday:!1,notToday:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDays:!1,whiteDates:!0,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{default:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:12,headerFormat:"%A, %B %-d, %Y",tooltip:"",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},themeDateToday:"info",themeDayHigh:"warning",themeDatePick:"info",themeDateHigh:"warning",themeDateHighAlt:"danger",themeDateHighRec:"warning",themeDate:"secondary",themeButton:"secondary",themeInput:"default",themeClearButton:"secondary",themeCancelButton:"secondary",themeTomorrowButton:"secondary",themeTodayButton:"secondary",buttonIconDate:"calendar-alt fa-lg",buttonIconTime:"clock ",disabledState:"disabled",bootstrapDropdown:!0,bootstrapDropdownRight:!0,bootstrapModal:!1,calNextMonthIcon:"angle-right",calPrevMonthIcon:"angle-left",useInlineAlign:"left",btnCls:"btn btn-sm btn-cal-",icnCls:" far fa-",s:{cal:{prevMonth:"<span title='{text}' class='fa fa-{icon}'></span>",nextMonth:"<span title='{text}' class='fa fa-{icon}'></span>",botButton:"<a href='#' class='{cls}' role='button'><span class='{icon}'></span> {text}</a>"}},tranDone:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",calHighToday:!0,calHighPick:!0,calShowDays:!0,calOnlyMonth:!1,calWeekMode:!1,calWeekModeDay:1,calControlGroup:!1,calShowWeek:!1,calUsePickers:!1,calNoHeader:!1,calFormatter:!1,calAlwaysValidateDates:!1,calYearPickMin:-6,calYearPickMax:6,calYearPickRelative:!0,calBeforeAppendFunc:function(e){return e},highDays:!1,highDates:!1,highDatesRec:!1,highDatesAlt:!1,enableDates:!1,calDateList:!1,calShowDateList:!1,validHours:!1,repButton:!0,durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1},flen:{y:25,m:24,d:40,h:24,i:30,s:30},slen:{y:9,m:14,d:16,h:16,i:30}},_getLongOptions:function(e){var t,a,n={};for(t in e.data())"datebox"===t.substr(0,7)&&t.length>7&&"options"!==(a=(a=t.substr(7)).charAt(0).toLowerCase()+a.slice(1))&&(n[a]=e.data(t));return n},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},baseMode:"bootstrap4",_stdBtn:{cancel:function(){var t=this,a=this.options;return e("<a href='#' role='button' class='btn btn-"+a.themeCancelButton+"'><span class='"+a.icnCls+"remove'></span> "+t.__("cancelButton")+"</a>").on(a.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,a=this.options;return e("<a href='#' role='button' class='btn btn-"+a.themeClearButton+"'><span class='"+a.icnCls+"eraser'></span> "+t.__("clearButton")+"</a>").on(a.clickEventAlt,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(t,a){var n=this,o=this.options;return void 0===a&&(a=!1),e("<a href='#' role='button' class='btn btn-"+o.themeCloseButton+"'><span class= 'far fa-clock mr-1'></span>  "+t+"</a>").addClass(!0===n.dateOK?"":"disabled").on(o.clickEventAlt,function(e){e.preventDefault(),!0===n.dateOK&&(!1===a?n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate}):(n._t(a),console.log("here3")),n._t({method:"close",closeCancel:!0}),console.log("here4"))})},today:function(){var t=this,a=this.options;return e("<a href='#' role='button' class='btn btn-"+a.themeTodayButton+"'><span class='"+a.icnCls+"send'></span> "+t.__("todayButtonLabel")+"</a>").on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t.calBackDate=!1,t._t({method:"doset"})})},tomorrow:function(){var t=this,a=this.options;return e("<a href='#' role='button' class='btn btn-"+a.themeTomorrowButton+"'><span class='"+a.icnCls+"send'></span> "+t.__("tomorrowButtonLabel")+"</a>").on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t.calBackDate=!1,t._t({method:"doset"})})}},_destroy:function(){var t=this,a=this.options,n=this.d.wrap.find(".input-group-addon");!0===a.useButton&&(n.remove(),t.d.input.unwrap()),a.lockInput&&t.d.input.removeAttr("readonly"),t.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox"),e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA)},_create:function(){e(document).trigger("dateboxcreate");var t=this,a=e.extend(this.options,this._getLongOptions(this.element),this.element.data("options")),n=!1===a.theme?"default":a.theme,o={input:this.element,wrap:this.element.parent(),mainWrap:e("<div>",{class:"ui-datebox-container shadow"}).css("zIndex",a.zindex),intHTML:!1},i=".datebox"+this.uuid,s=void 0!==window.ontouchstart,r={eStart:"touchstart"+i+" mousedown"+i,eMove:"touchmove"+i+" mousemove"+i,eEnd:"touchend"+i+" mouseup"+i,eEndA:["mouseup","touchend","touchcanel","touchmove"].join(i+" ")+i,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};e.extend(t,{d:o,drag:r,touch:s}),!1!==a.usePlaceholder&&(!0===a.usePlaceholder&&""!==t._grabLabel()&&t.d.input.attr("placeholder",t._grabLabel()),"string"==typeof a.usePlaceholder&&t.d.input.attr("placeholder",a.usePlaceholder)),a.theme=n,t.cancelClose=!1,t.calBackDate=!1,t.calDateVisible=!0,t.disabled=!1,t.runButton=!1,t._date=window.Date,t._enhanceDate(),t.baseID=t.d.input.attr("id"),t.initDate=new t._date,t.initDate.setMilliseconds(0),t.theDate=a.defaultValue?t._makeDate():""!==t.d.input.val()?t._makeDate(t.d.input.val()):new t._date,""===t.d.input.val()&&t._startOffset(t.theDate),t.initDone=!1,a.showInitialValue&&t.d.input.val(t._formatter(t.__fmt(),t.theDate)),t.d.wrap=t.d.input.wrap("<div class='input-group'>").parent(),!1!==a.mode&&!1===a.buttonIcon&&("time"===a.mode.substr(0,4)||"dur"===a.mode.substr(0,3)?a.buttonIcon=a.buttonIconTime:a.buttonIcon=a.buttonIconDate),a.useButton?e("<div class='input-group-addon custom-date-btn'><span class='"+a.icnCls+a.buttonIcon+"'></span></div>").attr("title",t.__("tooltip")).on(a.clickEvent,function(e){e.preventDefault(),a.useFocus?t.d.input.focus():t.disabled||t._t({method:"open"})}).appendTo(t.d.wrap):t.d.wrap.css("width","100%"),a.hideInput&&t.d.wrap.hide(),a.hideContainer&&t.d.wrap.parent().hide(),t.d.input.on("focus.datebox",function(){t.d.input.addClass("ui-focus"),!1===t.disabled&&a.useFocus&&t._t({method:"open"})}).on("blur.datebox",function(){t.d.input.removeClass("ui-focus")}).on("change.datebox",function(){t.theDate=t._makeDate(t.d.input.val()),t.refresh()}).on("datebox",t._event),a.lockInput,void 0!==e.event.special.mousewheel&&(t.wheelExists=!0),t.d.input.is(":disabled")&&t.disable(),t.applyMinMax(!1,!1),(a.useInline||a.useInlineBlind)&&t.open(),e(document).trigger("dateboxaftercreate")},open:function(){var t=this,a=this.options,n={};if(a.useFocus&&!0===t.fastReopen)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.calBackDate=!1,""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),void 0===t._build[a.mode]?t._build.default.apply(t,[]):t._build[a.mode].apply(t,[]),void 0!==t._drag[a.mode]&&t._drag[a.mode].apply(t,[]),t._t({method:"refresh"}),!0===t.__("useArabicIndic")&&t._doIndic(),(a.useInline||a.useInlineBlind)&&!1===t.initDone){switch(t.d.mainWrap.append(t.d.intHTML),a.hideContainer?(a.useHeader&&t.d.mainWrap.prepend(e(t._spf("<div class='{c1}'><h4 class='{c2}'>{text}</h4></div>",{c1:"modal-header",c2:"modal-title text-center",text:t.d.headerText}))),t.d.wrap.parent().after(t.d.mainWrap)):t.d.wrap.parent().append(t.d.mainWrap),a.useInlineAlign){case"right":t.d.mainWrap.css({marginRight:0,marginLeft:"auto"});break;case"left":t.d.mainWrap.css({marginLeft:0,marginRight:"auto"});break;case"center":case"middle":t.d.mainWrap.css({marginLeft:"auto",marginRight:"auto"})}if(t.d.mainWrap.removeClass("ui-datebox-hidden ui-overlay-shadow"),a.useInline)return t.d.mainWrap.addClass("ui-datebox-inline").css("zIndex","auto"),a.hideInput||a.hideContainer||t.d.mainWrap.addClass("ui-datebox-inline-has-input"),setTimeout(function(e){return function(){e._t({method:"postrefresh"})}}(t),100),!0;t.d.mainWrap.addClass("ui-datebox-inline ui-datebox-inline-has-input").css("zIndex","auto"),t.d.mainWrap.hide(),t.initDone=!1,t._t({method:"postrefresh"})}return a.useInlineBlind?(t.initDone?(t.refresh(),t.d.mainWrap.slideDown(),t._t({method:"postrefresh"})):t.initDone=!0,!0):!t.d.intHTML.is(":visible")&&(t.d.mainWrap.empty(),t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex),t._t({method:"postrefresh"}),!1!==a.openCallback?(e.isFunction(a.openCallback)||"function"==typeof window[a.openCallback]&&(a.openCallback=window[a.openCallback]),n.afteropen=function(){t._t({method:"postrefresh"}),!1===a.openCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.openCallbackArgs))&&t._t({method:"close"})}):n.afteropen=function(){t._t({method:"postrefresh"})},(!1===a.beforeOpenCallback||(e.isFunction(a.beforeOpenCallback)||"function"==typeof window[a.beforeOpenCallback]&&(a.beforeOpenCallback=window[a.beforeOpenCallback]),!1!==a.beforeOpenCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.beforeOpenCallbackArgs))))&&void(!0===a.bootstrapDropdown&&!1===a.bootstrapModal&&(t.d.mainWrap.addClass("dropdown-menu").addClass(a.useAnimation?a.transition:"").addClass(!0===a.bootstrapDropdownRight?"dropdown-menu-right":"").appendTo(t.d.wrap).on(a.tranDone,function(){t.d.mainWrap.is(":visible")?n.afteropen.call():(n.afterclose.call(),t.d.wrap.removeClass("show"))}),t.d.wrap.addClass("show"),t.d.backdrop=e("<div class='jtsage-datebox-backdrop-div'></div>").css({position:"fixed",left:0,top:0,bottom:0,right:0}).appendTo("body").on(a.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})}),window.setTimeout(function(){t.d.mainWrap.addClass("show")},0))))},close:function(){var t,a=this,n=this.options,o={};return a.calBackDate=!1,n.useInlineBlind?(a.d.mainWrap.slideUp(),!0):!(!n.useInline&&!1!==a.d.intHTML)||(!1!==n.closeCallback?(e.isFunction(n.closeCallback)||"function"==typeof window[n.closeCallback]&&(n.closeCallback=window[n.closeCallback]),o.afterclose=function(){n.closeCallback.apply(a,e.merge([{custom:a.customCurrent,initDate:a.initDate,date:a.theDate,duration:a.lastDuration,cancelClose:a.cancelClose}],n.closeCallbackArgs))}):o.afterclose=function(){return!0},!0===n.bootstrapDropdown&&!1===n.bootstrapModal&&(!0===n.useAnimation?(a.d.mainWrap.removeClass("show"),a.d.backdrop.remove(),e(".jtsage-datebox-backdrop-div").remove(),window.setTimeout(function(){a.d.wrap.removeClass("show"),o.afterclose.call()},0)):(a.d.wrap.removeClass("show"),a.d.backdrop.remove(),e(".jtsage-datebox-backdrop-div").remove(),o.afterclose.call())),e(document).off(a.drag.eMove).off(a.drag.eEnd).off(a.drag.eEndA),void(n.useFocus&&(a.fastReopen=!0,setTimeout((t=a,function(){t.fastReopen=!1}),300))))},disable:function(){var e=this;e.d.input.attr("disabled",!0),e.disabled=!0,e._t({method:"disable"})},enable:function(){var e=this;e.d.input.attr("disabled",!1),e.disabled=!1,e._t({method:"enable"})},_controlGroup:function(e){return this.options.useCollapsedBut?(e.find("a").css({width:"auto"}),e.addClass("btn-group btn-group-justified")):e.addClass("btn-group-vertical"),e},_enhanceDate:function(){e.extend(this._date.prototype,{copy:function(t,a){return t=e.extend([0,0,0,0,0,0,0],t),a=e.extend([0,0,0,0,0,0,0],a),new Date(a[0]>0?a[0]:this.get(0)+t[0],a[1]>0?a[1]:this.get(1)+t[1],a[2]>0?a[2]:this.get(2)+t[2],a[3]>0?a[3]:this.get(3)+t[3],a[4]>0?a[4]:this.get(4)+t[4],a[5]>0?a[5]:this.get(5)+t[5],a[6]>0?a[5]:this.get(6)+t[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),this.get(2)>10&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&this.getDate()>28?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),(a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1)<1?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_ord:{default:function(e){var t=e%10;return e>9&&e<21||t>3?"th":["th","st","nd","rd"][t]}},_customformat:{default:function(){return!1}},_formatter:function(e,t,a){var n,o=this,i=this.options,s=0;return void 0===a&&(a=!0),"dura"===i.mode.substr(0,4)&&(s=o._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(s[1]+=24*s[0]),e.match(/%Dl/)||(s[2]+=60*s[1]),e.match(/%DM/)||(s[3]+=60*s[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,a,r){if("X"===a)return void 0!==o._customformat[i.mode]?o._customformat[i.mode](r,t,i):e;if("D"===a)switch(r){case"d":return s[0];case"l":return o._zPad(s[1]);case"M":return o._zPad(s[2]);case"S":return o._zPad(s[3]);case"A":return o.__("durationDays")[1===s[0]?0:1];default:return e}switch(r){case"a":return o.__("daysOfWeekShort")[t.getDay()];case"A":return o.__("daysOfWeek")[t.getDay()];case"b":return o.__("monthsOfYearShort")[t.getMonth()];case"B":return o.__("monthsOfYear")[t.getMonth()];case"C":return parseInt(t.getFullYear()/100);case"d":return o._zPad(t.getDate(),a);case"H":case"k":return o._zPad(t.getHours(),a);case"I":case"l":return o._zPad(t.get12hr(),a);case"m":return o._zPad(t.getMonth()+1,a);case"M":return o._zPad(t.getMinutes(),a);case"p":case"P":return n=o.__("meridiem")[t.get(3)<12?0:1].toUpperCase(),"P"===r?n.toLowerCase():n;case"s":return t.getEpoch();case"S":return o._zPad(t.getSeconds(),a);case"u":return o._zPad(t.getDay()+1,a);case"w":return t.getDay();case"y":return o._zPad(t.getFullYear()%100);case"Y":return t.getFullYear();case"E":return t.getFullYear()+543;case"V":return o._zPad(t.getDWeek(4),a);case"U":return o._zPad(t.getDWeek(0),a);case"W":return o._zPad(t.getDWeek(1),a);case"o":return void 0!==o._ord[i.useLang]?o._ord[i.useLang](t.getDate()):o._ord.default(t.getDate());case"j":return n=new Date(t.getFullYear(),0,1),(n="000"+String(Math.ceil((t-n)/864e5)+1)).slice(-3);case"J":return t.toJSON();case"G":return n=t.getFullYear(),1===t.getDWeek(4)&&t.getMonth()>0?n+1:t.getDWeek(4)>51&&t.getMonth()<11?n-1:n;case"g":return n=t.getFullYear%100,1===t.getDWeek(4)&&t.getMonth()>0&&++n,t.getDWeek(4)>51&&t.getMonth()<11&&--n,o._zpad(n);default:return e}}),!0===o.__("useArabicIndic")&&!0===a&&(e=o._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,n=e%t;t>1&&n>0&&(a<0?e-=n:a>0?e+=t-n:e%t<t/2?e-=n:e+=t-n,this.theDate.setMinutes(e))},_check:function(){var t,a,n,o,i,s,r=this,d=this.options,l=this.theDate;if(r.dateOK=!0,void 0===d.mode)return!0;if(d.afterToday&&l<(t=new r._date)&&(l=t),d.beforeToday&&l>(t=new r._date)&&(l=t),!1!==d.maxDays&&((t=new r._date).adj(2,d.maxDays),l>t&&(l=t)),!1!==d.minDays&&((t=new r._date).adj(2,-1*d.minDays),l<t&&(l=t)),!1!==d.minHour&&l.get(3)<d.minHour&&l.setD(3,d.minHour),!1!==d.maxHour&&l.get(3)>d.maxHour&&l.setD(3,d.maxHour),!1!==d.minTime&&(t=new r._date,s=d.minTime.split(":"),t.setD(3,s[0]).setD(4,s[1]),l<t&&(l=t)),!1!==d.maxTime&&(t=new r._date,s=d.maxTime.split(":"),t.setD(3,s[0]).setD(4,s[1]),l>t&&(l=t)),!1!==d.maxYear&&l>(t=new r._date(d.maxYear,11,31))&&(l=t),!1!==d.minYear&&l<(t=new r._date(d.minYear,0,1))&&(l=t),"time"===d.mode.substr(0,4)||"dur"===d.mode.substr(0,3))"timeflipbox"===d.mode&&!1!==d.validHours&&e.inArray(l.get(3),d.validHours)<0&&(r.dateOK=!1);else{if(!1!==d.blackDatesRec)for(a=l.get(0),n=l.get(1),o=l.get(2),i=0;i<d.blackDatesRec.length;i++)-1!==d.blackDatesRec[i][0]&&d.blackDatesRec[i][0]!==a||-1!==d.blackDatesRec[i][1]&&d.blackDatesRec[i][1]!==n||-1!==d.blackDatesRec[i][2]&&d.blackDatesRec[i][2]!==o||(r.dateOK=!1);!1!==d.blackDates&&e.inArray(l.iso(),d.blackDates)>-1&&(r.dateOK=!1),!1!==d.blackDays&&e.inArray(l.getDay(),d.blackDays)>-1&&(r.dateOK=!1),!1!==d.whiteDates&&e.inArray(r.theDate.iso(),d.whiteDates)>-1&&(r.dateOK=!0,l=r.theDate)}r.theDate=l},_fixstepper:function(t){var a=this.options.durationSteppers,n=this.options.durationStep;e.inArray("d",t)>-1&&(a.d=n),e.inArray("h",t)>-1&&(a.d=1,a.h=n),e.inArray("i",t)>-1&&(a.h=1,a.i=n),e.inArray("s",t)>-1&&(a.i=1,a.s=n)},_parser:{default:function(){return!1}},_makeDate:function(t){var a,n,o,i,s=this,r=this.options,d=this.options.defaultValue,l=s.__fmt(),c=null,u=[],p=new s._date,h={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(t=e.trim(!0===s.__("useArabicIndic")&&void 0!==t?s._dRep(t,-1):t),void 0===r.mode)return p;if(void 0!==s._parser[r.mode])return s._parser[r.mode].apply(s,[t]);if("durationbox"===r.mode||"durationflipbox"===r.mode){if(l=l.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),c=(l=new RegExp("^"+l+"$")).exec(t),o=l.exec(s.__fmt()),null===c||c.length!==o.length)return"number"==typeof d&&d>0?new s._date(1e3*(s.initDate.getEpoch()+parseInt(d,10))):new s._date(s.initDate.getTime());for(n=s.initDate.getEpoch(),a=1;a<c.length;a++)i=parseInt(c[a],10),o[a].match(/^%Dd$/i)&&(n+=86400*i),o[a].match(/^%Dl$/i)&&(n+=3600*i),o[a].match(/^%DM$/i)&&(n+=60*i),o[a].match(/^%DS$/i)&&(n+=i);return new s._date(1e3*n)}if("%J"===l)return p=new s._date(t),isNaN(p.getDate())&&(p=new s._date),p;if(l=l.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(u.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return u.pop(),".+?"}}),c=(l=new RegExp("^"+l+"$")).exec(t),o=l.exec(s.__fmt()),null===c||c.length!==o.length){if(!1!==d&&""!==d)switch(typeof d){case"object":e.isFunction(d.getDay)?p=d:3===d.length&&(p=s._pa(d,"time"===r.mode.substr(0,4)&&p));break;case"number":p=new s._date(1e3*d);break;case"string":"time"===r.mode.substr(0,4)?(n=e.extend([0,0,0],d.split(":")).slice(0,3),p=s._pa(n,p)):((n=e.extend([0,0,0],d.split("-")).slice(0,3))[1]--,p=s._pa(n,!1))}isNaN(p.getDate())&&(p=new s._date)}else{for(a=1;a<c.length;a++)switch(i=parseInt(c[a],10),u[a-1]){case"s":return new s._date(1e3*parseInt(c[a],10));case"Y":case"G":h.year=i;break;case"E":h.year=i-543;break;case"y":case"g":r.afterToday||i<38?h.year=2e3+i:h.year=1900+i;break;case"m":h.mont=i-1;break;case"d":h.date=i;break;case"H":case"k":case"I":case"l":h.hour=i;break;case"M":h.mins=i;break;case"S":h.secs=i;break;case"u":h.wday=i-1;break;case"w":h.wday=i;break;case"j":h.yday=i;break;case"V":h.week=i,h.wtyp=4;break;case"U":h.week=i,h.wtyp=0;break;case"W":h.week=i,h.wtyp=1;break;case"p":case"P":i=new RegExp("^"+c[a]+"$","i"),h.meri=i.test(s.__("meridiem")[0])?-1:1;break;case"b":(n=e.inArray(c[a],s.__("monthsOfYearShort")))>-1&&(h.mont=n);break;case"B":(n=e.inArray(c[a],s.__("monthsOfYear")))>-1&&(h.mont=n)}if(0!==h.meri&&(-1===h.meri&&12===h.hour&&(h.hour=0),1===h.meri&&12!==h.hour&&(h.hour=h.hour+12)),p=new s._date(s._n(h.year,0),s._n(h.mont,0),s._n(h.date,1),s._n(h.hour,0),s._n(h.mins,0),s._n(h.secs,0),0),h.year<100&&-1!==h.year&&p.setFullYear(h.year),h.mont>-1&&h.date>-1||h.hour>-1&&h.mins>-1&&h.secs>-1)return p;!1!==h.week&&(p.setDWeek(h.wtyp,h.week),h.date>-1&&p.setDate(h.date)),!1!==h.yday&&p.setD(1,0).setD(2,1).adj(2,h.yday-1),!1!==h.wday&&p.adj(2,h.wday-p.getDay())}return p},_event:function(t,a){var n,o=e(this).data("jtsage-datebox"),i=e(this).data("jtsage-datebox").options;if(!t.isPropagationStopped())switch(a.method){case"close":void 0===a.closeCancel&&(a.closeCancel=!1),o.cancelClose=a.closeCancel,o.close();break;case"open":o.open();break;case"set":"object"==typeof a.value?(o.theDate=a.value,o._t({method:"doset"})):(e(this).val(a.value),!1!==i.linkedField&&e(i.linkedField).val(o.callFormat(i.linkedFieldFormat,o.theDate,!1)),e(this).trigger("change"));break;case"doset":n="_"+o.options.mode+"DoSet",e.isFunction(o[n])?o[n].apply(o,[]):o._t({method:"set",value:o._formatter(o.__fmt(),o.theDate),date:o.theDate});break;case"dooffset":a.type&&o._offset(a.type,a.amount,!0);break;case"dorefresh":o.refresh();break;case"doclear":e(this).val("").trigger("change");break;case"clear":e(this).trigger("change")}},_build:{default:function(){this.d.headerText="Error",!1!==this.d.intHTML&&this.d.intHTML.remove().empty(),this.d.intHTML=e("<div class='ui-body-b'><h2 style='text-align:center' class='bg-danger'>Unknown Mode</h2></div>")},calbox:function(){var t,a,n,o,i,s,r,d,l,c,u,p,h,f,m,b=this,_=this.options,D=_.calDateList,g="ui-datebox-",v=!1!==b.calBackDate&&b.theDate.get(0)===b.calBackDate.get(0)&&b.theDate.get(1)===b.calBackDate.get(1)?new b._date(b.calBackDate.getTime()):b.theDate,y=!1,k=b.initDate.copy(),x=b.initDate.copy(),w=(v.copy([0],[0,0,1]).getDay()-b.__("calStartDay")+7)%7,T=v.get(1),M=v.get(0),C=v.getArray(),B=""===b.d.input.val()?b._startOffset(b._makeDate(b.d.input.val())):b._makeDate(b.d.input.val()),L=-1,O=new b._date,H=O.getArray(),I=v.copy([0],[0,0,1]).adj(2,-1*w+(0===b.__("calStartDay")?1:0)).getDWeek(4),S=0,A=!1,P=!1,F=32-b.theDate.copy([0],[0,0,32,13]).getDate(),W=32-b.theDate.copy([0,-1],[0,0,32,13]).getDate(),j=!!(_.afterToday||_.beforeToday||_.notToday||_.calAlwaysValidateDates||_.maxDays||_.minDays||_.blackDays||_.blackDates);if(!1!==b.calBackDate&&b.theDate.get(0)===b.calBackDate.get(0)&&b.theDate.get(1)===b.calBackDate.get(1)&&(b.theDate=new b._date(b.calBackDate.getTime()),b.calBackDate=!1),"boolean"!=typeof b.d.intHTML&&(b.d.intHTML.remove(),b.d.intHTML=null),b.d.headerText=!1!==b._grabLabel()?b._grabLabel():b.__("titleDateDialogLabel"),b.d.intHTML=e("<span>"),e(b._spf("<div class='{cl1}'><div class='{cl2}'><h4 style='margin: 6px 0 0 0;'>{content}</h4></div></div>",{cl1:g+"gridheader",cl2:g+"gridlabel",content:b._formatter(b.__("calHeaderFormat"),b.theDate)})).appendTo(b.d.intHTML),b._cal_prev_next(b.d.intHTML.find("."+g+"gridheader")),_.calNoHeader&&(_.calUsePickersIcons?(b.d.intHTML.find("."+g+"gridlabel").hide(),b.d.intHTML.find("."+g+"gridplus").find(".ui-btn-inline").addClass(g+"nomargbtn"),b.d.intHTML.find("."+g+"gridminus").find(".ui-btn-inline").addClass(g+"nomargbtn")):b.d.intHTML.find("."+g+"gridheader").remove()),b.calNext=!0,b.calPrev=!0,Math.floor(O.comp()/100)===Math.floor(v.comp()/100)&&(A=!0),Math.floor(O.comp()/1e4)===Math.floor(v.comp()/1e4)&&(P=!0),B.comp()===v.comp()&&(L=B.get(2)),_.afterToday&&(A||P&&H[1]>=C[1])&&(b.calPrev=!1),_.beforeToday&&(A||P&&H[1]<=C[1])&&(b.calNext=!1),!1!==_.minDays&&(k.adj(2,-1*_.minDays),t=k.getArray(),C[0]===t[0]&&C[1]<=t[1]&&(b.calPrev=!1)),!1!==_.maxDays&&(x.adj(2,_.maxDays),t=x.getArray(),C[0]===t[0]&&C[1]>=t[1]&&(b.calNext=!1)),_.calUsePickers&&b._cal_pickers(T,M,H),a=e("<div class='"+g+"grid'>").appendTo(b.d.intHTML),_.calShowDays)for(b._cal_days=b.__("daysOfWeekShort").concat(b.__("daysOfWeekShort")),o=e("<div>",{class:g+"gridrow"}).appendTo(a),_.calControlGroup&&o.addClass(g+"gridrow-last"),!0===b.__("isRTL")&&o.css("direction","rtl"),_.calShowWeek&&e("<div>").addClass(g+"griddate "+g+"griddate-label").appendTo(o),c=0;c<=6;c++)e("<div>").text(b._cal_days[(c+b.__("calStartDay"))%7]).addClass(g+"griddate "+g+"griddate-label").appendTo(o);for(m={i:k,x:x,t:O,p:L},n=b._cal_gen(w,W,F,!_.calOnlyMonth,v.get(1)),!e.isFunction(_.calFormatter)&&!1!==_.calFormatter&&e.isFunction(window[_.calFormatter])&&(_.calFormatter=window[_.calFormatter]),!e.isFunction(_.calBeforeAppendFunc)&&!1!==_.calBeforeAppendFunc&&e.isFunction(window[_.calBeforeAppendFunc])&&(_.calBeforeAppendFunc=window[_.calBeforeAppendFunc]),h=new Date(b.theDate.get(0),n[0][0][1],n[0][0][0],0,0,0,0),f=new Date(b.theDate.get(0),n[n.length-1][6][1],n[n.length-1][6][0],0,0,0,0),!1===b.calBackDate?b.calDateVisible=!0:_.calOnlyMonth?b.calDateVisible=!1:b.calBackDate.comp()<h.comp()||b.calBackDate.comp()>f.comp()?b.calDateVisible=!1:b.calDateVisible=!0,i=0,r=n.length;i<r;i++){for(l=e("<div>",{class:g+"gridrow"}),b.__("isRTL")&&l.css("direction","rtl"),_.calShowWeek&&(e("<div>",{class:g+"griddate "+g+"griddate-empty"}).text("W"+I).addClass("bootstrap"===b.baseMode?"pull-left":"").css(_.calControlGroup?{float:"left"}:{}).appendTo(l),++I>52&&void 0!==n[i+1]&&(I=new b._date(C[0],C[1],0===b.__("calStartDay")?n[i+1][1][0]:n[i+1][0][0],0,0,0,0).getDWeek(4))),s=0,d=n[i].length;s<d;s++)_.calWeekMode&&(S=n[i][_.calWeekModeDay][0]),"boolean"==typeof n[i][s]?e("<div>",{class:g+"griddate "+g+"griddate-empty"}).appendTo(l):(y=b._cal_check(j,C[0],n[i][s][1],n[i][s][0],m),n[i][s][0]&&(e.isFunction(_.calFormatter)?((p={Year:n[i][s][1]>11?M+1:n[i][s][1]<0?M-1:M,Month:12===n[i][s][1]?0:-1===n[i][s][1]?11:n[i][s][1],Date:n[i][s][0]}).Arr=[p.Year,b._zPad(p.Month+1),b._zPad(p.Date)],p.ISO=p.Arr.join("-"),p.Comp=p.Arr.join(""),p.curMonth=v.get(1),p.curYear=M,p.dateVisible=b.calDateVisible,u="object"!=typeof(t=_.calFormatter(p))?{text:t,class:""}:{text:t.text,class:t.class}):u={text:n[i][s][0],class:""},_.calBeforeAppendFunc(e("<div>").html(u.text).addClass(g+"griddate").addClass(""+(T===n[i][s][1]||y.force?y.ok||"jqm"!==b.baseMode?_.btnCls+y.theme:_.btnCls+" "+y.theme:g+"griddate-empty"+("bootstrap"===b.baseMode?_.btnCls+"default":"")+(!0===_.calOnlyMonth?" "+_.disabledState:""))).addClass(u.class).css(T===n[i][s][1]||_.calOnlyMonth?{}:{cursor:"pointer"}).data("date",_.calWeekMode?S:n[i][s][0]).data("enabled",y.ok).data("month",n[i][_.calWeekMode?_.calWeekModeDay:s][1])).appendTo(l)));switch(b.baseMode){case"jqm":_.calControlGroup&&(l.find("."+g+"griddate-empty").addClass("ui-btn"),_.calOnlyMonth&&l.find("."+g+"griddate-empty").addClass("ui-state-disabled"),l.controlgroup({type:"horizontal"}));break;case"bootstrap":l.addClass("btn-group");break;case"jqueryui":l.find("."+g+"griddate").removeClass("ui-corner-all").not("."+g+"griddate-empty").first().addClass("ui-corner-left").end().last().addClass("ui-corner-right")}i===r-1&&l.addClass(g+"gridrow-last"),l.appendTo(a)}_.calShowWeek&&a.find("."+g+"griddate").addClass(g+"griddate-week"),_.calShowDateList&&!1!==D&&b._cal_date_list(a),(_.useTodayButton||_.useTomorrowButton||_.useClearButton||_.useCancelButton)&&(l=e("<div>",{class:g+"controls"}),_.useTodayButton&&l.append(b._stdBtn.today.apply(b)),_.useTomorrowButton&&l.append(b._stdBtn.tomorrow.apply(b)),_.useClearButton&&l.append(b._stdBtn.clear.apply(b)),_.useCancelButton&&l.append(b._stdBtn.cancel.apply(b)),b._controlGroup(l).appendTo(a)),b.d.intHTML.on(_.clickEventAlt,"div."+g+"griddate",function(t){t.preventDefault(),e(this).data("enabled")&&(b.calBackDate=!1,b.theDate.setD(2,1).setD(1,e(this).data("month")).setD(2,e(this).data("date")),b._t({method:"set",value:b._formatter(b.__fmt(),b.theDate),date:b.theDate}),b._t({method:"close"}))}),b.d.intHTML.on("swipeleft",function(){b.calNext&&(!1===b.calBackDate&&(b.calBackDate=new Date(b.theDate.getTime())),b._offset("m",1))}).on("swiperight",function(){b.calPrev&&(!1===b.calBackDate&&(b.calBackDate=new Date(b.theDate.getTime())),b._offset("m",-1))}),b.wheelExists&&b.d.intHTML.on("mousewheel",function(e,t){e.preventDefault(),t>0&&b.calNext&&(!1===b.calBackDate&&(b.calBackDate=new Date(b.theDate.getTime())),b.theDate.setD(2,1),b._offset("m",1)),t<0&&b.calPrev&&(!1===b.calBackDate&&(b.calBackDate=new Date(b.theDate.getTime())),b.theDate.setD(2,1),b._offset("m",-1))})},timebox:function(){this._build.datebox.apply(this,[])},durationbox:function(){this._build.datebox.apply(this,[])},datebox:function(){var t,a,n,o,i,s,r=this,d=this.drag,l=this.options,c="durationbox"===l.mode,u=0,p=["d","h","i","s"],h="ui-datebox-";for("boolean"!=typeof r.d.intHTML&&r.d.intHTML.empty().remove(),r.d.headerText=!1!==r._grabLabel()?r._grabLabel():"datebox"===l.mode?r.__("titleDateDialogLabel"):r.__("titleTimeDialogLabel"),r.d.intHTML=e("<span>"),r.fldOrder="datebox"===l.mode?r.__("dateFieldOrder"):c?r.__("durationOrder"):r.__("timeFieldOrder"),c?(r.dateOK=!0,r._fixstepper(r.fldOrder)):(r._check(),r._minStepFix(),r._dbox_vhour(void 0!==r._dbox_delta?r._dbox_delta:1)),"datebox"===l.mode&&e(r._spf("<div class='{cls}'><h4>{text}</h4></div>",{cls:h+"header",text:r._formatter(r.__("headerFormat"),r.theDate)})).appendTo(r.d.intHTML),o=e("<div>").addClass(h+"datebox-groups"),a=0;a<r.fldOrder.length;a++)i=e("<div>").addClass(h+"datebox-group"),"jqm"===r.baseMode&&i.addClass("ui-block-"+["a","b","c","d","e"][u]),t=c?l.durationSteppers[r.fldOrder[a]]:"i"===r.fldOrder[a]?l.minuteStep:1,"a"===r.fldOrder[a]&&12!==r.__("timeFormat")||(r._dbox_button(1,r.fldOrder[a],t).appendTo(i),c&&e(r._spf("<div><label>{text}</label></div>",{text:r.__("durationLabel")[e.inArray(r.fldOrder[a],p)]})).addClass(h+"datebox-label ui-body-"+l.themeInput).appendTo(i),e("<div><input class='form-control w-100' type='text'></div>").addClass(function(){switch(r.baseMode){case"jqm":return"ui-input-text ui-body-"+l.themeInput+" ui-mini";case"bootstrap":case"bootstrap4":return l.themeInput;default:return null}}).appendTo(i).find("input").data({field:r.fldOrder[a],amount:t}),r._dbox_button(-1,r.fldOrder[a],t).appendTo(i),i.appendTo(o),u++);switch(r.baseMode){case"jqm":o.addClass("ui-grid-"+[0,0,"a","b","c","d","e"][u]);break;case"bootstrap":o.addClass("row"),o.find("."+h+"datebox-group").each(function(){e(this).addClass("col-xs-"+12/u)});break;case"bootstrap4":o.addClass("row"),o.find("."+h+"datebox-group").each(function(){e(this).addClass("px-0 col-sm-"+12/u)});break;case"jqueryui":o.find("."+h+"datebox-group").each(function(){e(this).css("width",100/u+"%")})}o.appendTo(r.d.intHTML),r.d.divIn=o,r._dbox_run_update(!0),(l.useSetButton||l.useClearButton||l.useCancelButton||l.useTodayButton||l.useTomorrowButton)&&(s=e("<div>",{class:h+"controls"}),l.useSetButton&&(r.setBut=r._stdBtn.close.apply(r,["datebox"===l.mode?r.__("setDateButtonLabel"):c?r.__("setDurationButtonLabel"):r.__("setTimeButtonLabel")]),r.setBut.appendTo(s)),l.useTodayButton&&s.append(r._stdBtn.today.apply(r)),l.useTomorrowButton&&s.append(r._stdBtn.tomorrow.apply(r)),l.useClearButton&&s.append(r._stdBtn.clear.apply(r)),l.useCancelButton&&s.append(r._stdBtn.cancel.apply(r)),r._controlGroup(s).appendTo(r.d.intHTML)),l.repButton||r.d.intHTML.on(l.clickEvent,"."+h+"datebox-button",function(t){o.find(":focus").blur(),t.preventDefault(),r._dbox_delta=e(this).data("amount")>1?1:-1,r._offset(e(this).data("field"),e(this).data("amount"))}),o.on("change","input",function(){r._dbox_enter(e(this))}),o.on("keypress","input",function(t){13===t.which&&!0===r.dateOK&&(r._dbox_enter(e(this)),r._t({method:"set",value:r._formatter(r.__fmt(),r.theDate),date:r.theDate}),r._t({method:"close"}))}),r.wheelExists&&o.on("mousewheel","input",function(t,a){t.preventDefault(),r._dbox_delta=a<0?-1:1,r._offset(e(this).data("field"),(a<0?-1:1)*e(this).data("amount"))}),l.repButton&&(r.d.intHTML.on(d.eStart,"."+h+"datebox-button",function(t){t.preventDefault(),o.find(":focus").blur(),n=[e(this).data("field"),e(this).data("amount")],d.move=!0,d.cnt=0,r._dbox_delta=e(this).data("amount")>1?1:-1,r._offset(n[0],n[1],!1),r._dbox_run_update(),r.runButton||(d.target=n,r.runButton=setTimeout(function(){r._dbox_run()},500))}),r.d.intHTML.on(d.eEndA,"."+h+"datebox-button",function(e){d.move&&(e.preventDefault(),clearTimeout(r.runButton),r.runButton=!1,d.move=!1)}))},timeflipbox:function(){this._build.flipbox.apply(this)},durationflipbox:function(){this._build.flipbox.apply(this)},flipbox:function(){var t,a,n,o,i,s,r,d,l,c=this,u=this.options,p=this.drag,h={},f=["d","h","i","s"],m="durationflipbox"===u.mode,b="ui-datebox-",_=e("<div class='ui-overlay-shadow'><ul></ul></div>"),D=e("<div>",{class:b+"flipcontent"}),g=c.theDate.getTime()-c.initDate.getTime(),v=("jqm"===c.baseMode?"ui-body-":"")+("bootstrap"===c.baseMode||"bootstrap4"===c.baseMode?"bg-":""),y=c._dur(g<0?0:g);if(g<0?(c.lastDuration=0,m&&c.theDate.setTime(c.initDate.getTime())):m&&(c.lastDuration=g/1e3),"boolean"!=typeof c.d.intHTML?c.d.intHTML.empty().remove():c.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&c._fbox_pos()}),c.d.headerText=!1!==c._grabLabel()?c._grabLabel():"flipbox"===u.mode?c.__("titleDateDialogLabel"):c.__("titleTimeDialogLabel"),c.d.intHTML=e("<span>"),e(document).one("popupafteropen",function(){c._fbox_pos()}),c.fldOrder="flipbox"===u.mode?c.__("dateFieldOrder"):m?c.__("durationOrder"):c.__("timeFieldOrder"),m?(!1!==u.minDur&&c.theDate.getEpoch()-c.initDate.getEpoch()<u.minDur&&(c.theDate=new Date(c.initDate.getTime()+1e3*u.minDur),c.lastDuration=u.minDur,y=c._dur(1e3*u.minDur)),!1!==u.maxDur&&c.theDate.getEpoch()-c.initDate.getEpoch()>u.maxDur&&(c.theDate=new Date(c.initDate.getTime()+1e3*u.maxDur),c.lastDuration=u.maxDur,y=c._dur(1e3*u.maxDur))):(c._check(),c._minStepFix()),"flipbox"===u.mode&&e(c._spf("<div class='{cls}'><h4>{text}</h4></div>",{cls:b+"header",text:c._formatter(c.__("headerFormat"),c.theDate)})).appendTo(c.d.intHTML),m){for(c._fixstepper(c.fldOrder),o=e(c._spf("<div class='{cls}'></div>",{cls:b+"header ui-grid-"+["a","b","c","d","e"][c.fldOrder.length-2]+" row"})),a=0;a<c.fldOrder.length;a++)e(c._spf("<div class='{cls}'>{text}</div>",{text:c.__("durationLabel")[e.inArray(c.fldOrder[a],f)],cls:b+"fliplab ui-block-"+["a","b","c","d","e"][a]+" col-xs-"+12/c.fldOrder.length})).appendTo(o);for(o.appendTo(c.d.intHTML),c.dateOK=!0,h.d=c._fbox_series(y[0],64,"d",!1),h.h=c._fbox_series(y[1],64,"h",y[0]>0),h.i=c._fbox_series(y[2],60,"i",y[0]>0||y[1]>0),h.s=c._fbox_series(y[3],60,"s",y[0]>0||y[1]>0||y[2]>0),D.addClass(b+"flipcontentd"),a=0;a<c.fldOrder.length;a++){for(t in s=c.fldOrder[a],d=y[e.inArray(s,f)],i=(n=_.clone().data({field:s,amount:u.durationSteppers[s]})).find("ul"),h[s])e(c._spf("<li class='{cls}'><span>{text}</span></li>",{text:h[s][t][0],cls:v+(h[s][t][1]!==d?u.themeDate:u.themeDatePick)})).appendTo(i);n.appendTo(D)}}else 4===c.fldOrder.length&&D.addClass(b+"flipcontentd");for(a=0;a<c.fldOrder.length&&!m;a++){if(d=c.fldOrder[a],i=(n=_.clone().data({field:d,amount:"i"===d?u.minuteStep:1})).find("ul"),"function"==typeof c._fbox_mktxt[d]){for(t=-1*u.flen[d];t<u.flen[d]+1;t++)e(c._spf("<li class='{cls}'><span>{text}</span></li>",{cls:v+(0!==t?u.themeDate:u.themeDatePick),text:c._fbox_mktxt[d].apply(c,["i"===d?t*u.minuteStep:t])})).appendTo(i);n.appendTo(D)}if("a"===d&&12===c.__("timeFormat")){for(l=e("<li class='"+v+u.themeDate+"'><span></span></li>"),t=-1*(o=c.theDate.get(3)>11?[u.themeDate,u.themeDatePick,2,5]:[u.themeDatePick,u.themeDate,2,3])[2];t<o[3];t++)t<0||t>1?l.clone().appendTo(i):e(c._spf("<li class='{cls}'><span>{text}</span></li>",{cls:v+o[t],text:c.__("meridiem")[t]})).appendTo(i);n.appendTo(D)}}c.d.intHTML.append(D),e("<div>",{class:b+"flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(c.d.intHTML),(u.useSetButton||u.useClearButton||u.useCancelButton||u.useTodayButton||u.useTomorrowButton)&&(r=e("<div>",{class:b+"controls"}),u.useSetButton&&r.append(c._stdBtn.close.apply(c,["flipbox"===u.mode?c.__("setDateButtonLabel"):m?c.__("setDurationButtonLabel"):c.__("setTimeButtonLabel")])),u.useTodayButton&&r.append(c._stdBtn.today.apply(c)),u.useTomorrowButton&&r.append(c._stdBtn.tomorrow.apply(c)),u.useClearButton&&r.append(c._stdBtn.clear.apply(c)),u.useCancelButton&&r.append(c._stdBtn.cancel.apply(c)),c._controlGroup(r).appendTo(c.d.intHTML)),c.wheelExists&&c.d.intHTML.on("mousewheel",".ui-overlay-shadow",function(t,a){t.preventDefault(),c._offset(e(this).data("field"),(a<0?1:-1)*e(this).data("amount"))}),c.d.intHTML.on(p.eStart,"ul",function(t,a){p.move||(void 0!==a&&(t=a),p.move=!0,p.target=e(this).find("li").first(),p.pos=parseInt(p.target.css("marginTop").replace(/px/i,""),10),p.start="touch"===t.type.substr(0,5)?t.originalEvent.changedTouches[0].pageY:t.pageY,p.end=!1,p.direc=m?-1:1,p.velocity=0,p.time=Date.now(),t.stopPropagation(),t.preventDefault())})},slidebox:function(){var t,a,n,o,i,s,r=this,d=this.options,l=this.drag,c="ui-datebox-",u=e("<div class='"+c+"sliderow-int'></div>"),p=e("<div>"),h=e("<div>",{class:c+"slide"});for("boolean"!=typeof r.d.intHTML?r.d.intHTML.remove().empty():r.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&r._sbox_pos()}),r.d.headerText=!1!==r._grabLabel()?r._grabLabel():r.__("titleDateDialogLabel"),r.d.intHTML=e("<span class='"+c+"nopad'>"),r.fldOrder=r.__("slideFieldOrder"),r._check(),r._minStepFix(),e("<div class='"+c+"header'><h4>"+r._formatter(r.__("headerFormat"),r.theDate)+"</h4></div>").appendTo(r.d.intHTML),r.d.intHTML.append(h),a=0;a<r.fldOrder.length;a++)if(i=r.fldOrder[a],o=p.clone().addClass(c+"sliderow").data("rowtype",i),n=u.clone().data("rowtype",i).appendTo(o),!0===r.__("isRTL")&&n.css("direction","rtl"),"function"==typeof r._sbox_mktxt[i]){for(t=-1*d.slen[i];t<d.slen[i]+1;t++)s=r._sbox_mktxt[i].apply(r,[t]),e("<div>",{class:c+"slidebox "+c+s[0]+d.btnCls+(0===t?d.themeDatePick:d.themeDate)}).html(s[1]).data("offset",t).appendTo(n);"bootstrap"===r.baseMode&&o.find(".btn-sm").removeClass("btn-sm").addClass("btn-xs"),o.appendTo(h)}(d.useSetButton||d.useClearButton||d.useCancelButton||d.useTodayButton||d.useTomorrowButton)&&(a=e("<div>",{class:c+"controls "+c+"repad"}),d.useSetButton&&a.append(r._stdBtn.close.apply(r,[r.__("setDateButtonLabel")])),d.useTodayButton&&a.append(r._stdBtn.today.apply(r)),d.useTomorrowButton&&a.append(r._stdBtn.tomorrow.apply(r)),d.useClearButton&&a.append(r._stdBtn.clear.apply(r)),d.useCancelButton&&a.append(r._stdBtn.cancel.apply(r)),r._controlGroup(a).appendTo(r.d.intHTML)),r.wheelExists&&r.d.intHTML.on("mousewheel",".ui-datebox-sliderow-int",function(t,a){t.preventDefault(),r._offset(e(this).data("rowtype"),(a<0?-1:1)*("i"===e(this).data("rowtype")?d.minuteStep:1))}),r.d.intHTML.on(d.clickEvent,".ui-datebox-sliderow-int>div",function(t){t.preventDefault(),r._offset(e(this).parent().data("rowtype"),parseInt(e(this).data("offset"),10))}),r.d.intHTML.on(l.eStart,".ui-datebox-sliderow-int",function(t){l.move||(l.move=!0,l.target=e(this),l.pos=parseInt(l.target.css("marginLeft").replace(/px/i,""),10),l.start="touch"===t.type.substr(0,5)?t.originalEvent.changedTouches[0].pageX:t.pageX,l.end=!1,l.velocity=0,l.time=Date.now(),t.stopPropagation(),t.preventDefault())})}},_drag:{default:function(){return!1},timeflipbox:function(){this._drag.flipbox.apply(this)},durationflipbox:function(){this._drag.flipbox.apply(this)},flipbox:function(){var t=this,a=this.options,n=this.drag;e(document).on(n.eMove,function(e){if(n.move&&"flipbox"===a.mode.slice(-7))return n.end="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageY:e.pageY,n.target.css("marginTop",n.pos+n.end-n.start+"px"),n.elapsed=Date.now()-n.time,n.velocity=100*(n.end-n.start)/(1+n.elapsed)*.8+.2*n.velocity,e.preventDefault(),e.stopPropagation(),!1}),e(document).on(n.eEnd,function(e){var o,i,s,r,d,l,c;n.move&&"flipbox"===a.mode.slice(-7)&&(n.velocity<15&&n.velocity>-15||!a.useKinetic?(n.move=!1,!1!==n.end&&(e.preventDefault(),e.stopPropagation(),n.tmp=n.target.parent().parent(),t._offset(n.tmp.data("field"),parseInt((n.start-n.end)/(n.target.outerHeight()-2),10)*n.tmp.data("amount")*n.direc)),n.start=!1,n.end=!1):(n.move=!1,n.start=!1,n.end=!1,n.tmp=n.target.parent().parent(),o=n.target.outerHeight(),i=-.8*n.velocity*Math.exp(-n.elapsed/325)*8*-1,s=parseInt(n.target.css("marginTop").replace(/px/i,""),10),r=parseInt(s+i,10),d=n.pos-r,l=Math.round(d/o),c=l*n.tmp.data("amount")*n.direc,n.target.animate({marginTop:r},parseInt(1e4/n.velocity)+1e3,function(){t._offset(n.tmp.data("field"),c)}),e.preventDefault(),e.stopPropagation()))})},slidebox:function(){var t=this,a=this.options,n=this.drag;e(document).on(n.eMove,function(e){if(n.move&&"slidebox"===a.mode)return n.end="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageX:e.pageX,n.target.css("marginLeft",n.pos+n.end-n.start+"px"),n.elapsed=Date.now()-n.time,n.velocity=100*(n.end-n.start)/(1+n.elapsed)*.8+.2*n.velocity,e.preventDefault(),e.stopPropagation(),!1}),e(document).on(n.eEnd,function(e){var o,i,s,r,d,l,c;n.move&&"slidebox"===a.mode&&(n.velocity<15&&n.velocity>-15||!a.useKinetic?(n.move=!1,!1!==n.end&&(e.preventDefault(),e.stopPropagation(),n.tmp=n.target.find("div").first(),t._offset(n.target.data("rowtype"),(t.__("isRTL")?-1:1)*parseInt((n.start-n.end)/n.tmp.innerWidth(),10)*("i"===n.target.data("rowtype")?a.minuteStep:1))),n.start=!1,n.end=!1):(n.move=!1,n.start=!1,n.end=!1,n.tmp=n.target.find("div").first(),o=n.tmp.innerWidth(),i=-.8*n.velocity*Math.exp(-n.elapsed/325)*8*-1,s=parseInt(n.target.css("marginLeft").replace(/px/i,""),10),r=parseInt(s+i,10),d=n.pos-r,l=Math.round(d/o),c=l*("i"===n.target.data("rowtype")?a.minuteStep:1),n.target.animate({marginLeft:r},parseInt(1e4/n.velocity)+1e3,function(){t._offset(n.target.data("rowtype"),c)}),e.preventDefault(),e.stopPropagation()))})}},_offset:function(t,a,n){var o,i,s=this,r=this.options,d=this.theDate,l=!1,c=!1,u=32-s.theDate.copy([0],[0,0,32,13]).getDate();if(t=(t||"").toLowerCase(),i=e.inArray(t,["y","m","d","h","i","s"]),void 0===n&&(n=!0),"a"===t||void 0!==r.rolloverMode[t]&&!0!==r.rolloverMode[t])switch(t){case"y":l=0;break;case"m":s._btwn(d.get(1)+a,-1,12)?l=1:c=(o=d.get(1)+a)<0?[1,12+o]:[1,o%12];break;case"d":s._btwn(d.get(2)+a,0,u+1)?l=2:c=(o=d.get(2)+a)<1?[2,u+o]:[2,o%u];break;case"h":s._btwn(d.get(3)+a,-1,24)?l=3:c=(o=d.get(3)+a)<0?[3,24+o]:[3,o%24];break;case"i":s._btwn(d.get(4)+a,-1,60)?l=4:c=(o=d.get(4)+a)<0?[4,59+o]:[4,o%60];break;case"s":s._btwn(d.get(5)+a,-1,60)?l=5:c=(o=d.get(5)+a)<0?[5,59+o]:[5,o%60];break;case"a":s._offset("h",12*(a>0?1:-1),!1)}else l=i;!1!==l?s.theDate.adj(l,a):s.theDate.setD(c[0],c[1]),!0===n&&s.refresh(),r.useImmediate&&s._t({method:"doset"}),!1!==s.calBackDate&&s._t({method:"displayChange",selectedDate:s.calBackDate,shownDate:s.theDate,thisChange:t,thisChangeAmount:a}),s._t({method:"offset",type:t,amount:a,newDate:s.theDate})},_startOffset:function(e){var t=this.options;return!1!==t.startOffsetYears&&e.adj(0,t.startOffsetYears),!1!==t.startOffsetMonths&&e.adj(1,t.startOffsetMonths),!1!==t.startOffsetDays&&e.adj(2,t.startOffsetDays),e},getTheDate:function(){return!1!==this.calBackDate?this.calBackDate:this.theDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return this.calDateVisible},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a,n=this;return n.fmtOver=e,a=n._makeDate(t),n.fmtOver=!1,a},callFormat:function(e,t,a){return void 0===a&&(a=!1),this._formatter(e,t,a)},refresh:function(){var e=this,t=this.options;void 0===e._build[t.mode]?e._build.default.apply(e,[]):e._build[t.mode].apply(e,[]),!0===e.__("useArabicIndic")&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var a,n,o,i=this,s=this.options,r=new this._date;a=i._pa([0,0,0],r),void 0===e&&(e=!0),void 0===t&&(t=!0),!0!==t&&!1!==s.minDays||void 0===i.d.input.attr("min")||(n=i.d.input.attr("min").split("-"),o=(new i._date(n[0],n[1]-1,n[2],0,0,0,0).getTime()-a.getTime())/864e5,s.minDays=parseInt(-1*o,10)),!0!==t&&!1!==s.maxDays||void 0===i.d.input.attr("max")||(n=i.d.input.attr("max").split("-"),o=(new i._date(n[0],n[1]-1,n[2],0,0,0,0).getTime()-a.getTime())/864e5,s.maxDays=parseInt(o,10)),!0===e&&i._t({method:"refresh"})},_dur:function(t){var a=[t/864e5,t/36e5%24,t/6e4%60,t/1e3%60];return e.each(a,function(e,t){a[e]=t<0?0:Math.floor(t)}),a},__:function(e){var t=this.options,a=t.lang[t.useLang],n=t[t.mode+"lang"],o="override"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t[o]?t[o]:void 0!==a&&void 0!==a[e]?a[e]:void 0!==n&&void 0!==n[e]?n[e]:void 0!==t.lang.default[e]?t.lang.default[e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if(void 0!==e.fmtOver&&!1!==e.fmtOver)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return void 0!==t&&"-"===t?String(e):(e<10?"0":"")+String(e)},_dRep:function(e,t){var a,n,o=48,i=57,s=1584,r="";for(-1===t&&(o+=s,i+=s,s=-1584),n=0;n<e.length;n++)r+=(a=e.charCodeAt(n))>=o&&a<=i?String.fromCharCode(a+s):String.fromCharCode(a);return r},_doIndic:function(){var t=this;t.d.intHTML.find("*").each(function(){e(this).children().length<1?e(this).text(t._dRep(e(this).text())):e(this).hasClass("ui-datebox-slideday")&&e(this).html(t._dRep(e(this).html()))}),t.d.intHTML.find("input").each(function(){e(this).val(t._dRep(e(this).val()))})},_n:function(e,t){return e<0?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,a){return e>t&&e<a},_grabLabel:function(){var t,a,n=this,o=this.options,i=!1;return void 0===o.overrideDialogLabel?(t=n.d.input.attr("placeholder"),a=n.d.input.attr("title"),void 0!==t?t:void 0!==a?a:""!==(i=e(document).find("label[for='"+n.d.input.attr("id")+"']").text())&&i):o.overrideDialogLabel},_t:function(e){this.d.input.trigger("datebox",e)},_spf:function(t,a){return e.isArray(a)||e.isPlainObject(a)?t.replace(/{(.+?)}/g,function(e,t){return a[t]}):t},_cal_gen:function(e,t,a,n,o){var i=0,s=0,r=1,d=1,l=[],c=[],u=!1;for(i=0;i<=5;i++)if(!1===u){for(c=[],s=0;s<=6;s++)0===i&&s<e?!0===n?c.push([t+(s-e)+1,o-1]):c.push(" "):i>3&&r>a?(!0===n?(c.push([d,o+1]),d++):c.push(" "),u=!0):(c.push([r,o]),++r>a&&(u=!0));l.push(c)}return l},_cal_check:function(t,a,n,o,i){var s,r=this,d=this.options,l=i.x,c=i.i,u=i.t,p=i.p,h=new this._date(a,n,o,12,0,0,0).getDay(),f=d.blackDatesRec,m=d.highDatesRec,b={ok:!0,iso:a+"-"+r._zPad(n+1)+"-"+r._zPad(o),theme:d.themeDate,force:!1,recok:!0,rectheme:!1};if(12===n&&(b.iso=a+1+"-01-"+r._zPad(o)),-1===n&&(b.iso=a-1+"-12-"+r._zPad(o)),b.comp=parseInt(b.iso.replace(/-/g,""),10),!1!==f)for(s=0;s<f.length;s++)-1!==f[s][0]&&f[s][0]!==a||-1!==f[s][1]&&f[s][1]!==n||-1!==f[s][2]&&f[s][2]!==o||(b.ok=!1);if(e.isArray(d.enableDates)&&e.inArray(b.iso,d.enableDates)<0?b.ok=!1:t&&(!0!==b.recok||d.afterToday&&u.comp()>b.comp||d.beforeToday&&u.comp()<b.comp||d.notToday&&u.comp()===b.comp||!1!==d.maxDays&&l.comp()<b.comp||!1!==d.minDays&&c.comp()>b.comp||e.isArray(d.blackDays)&&e.inArray(h,d.blackDays)>-1||e.isArray(d.blackDates)&&e.inArray(b.iso,d.blackDates)>-1)&&(b.ok=!1),e.isArray(d.whiteDates)&&e.inArray(b.iso,d.whiteDates)>-1&&(b.ok=!0),b.ok){if(!1!==m)for(s=0;s<m.length;s++)-1!==m[s][0]&&m[s][0]!==a||-1!==m[s][1]&&m[s][1]!==n||-1!==m[s][2]&&m[s][2]!==o||(b.rectheme=!0);!d.calHighPick||o!==p||""===r.d.input.val()&&!1===d.defaultValue?d.calHighToday&&b.comp===u.comp()?b.theme=d.themeDateToday:d.calHighPick&&r.calDateVisible&&!1!==r.calBackDate&&r.calBackDate.comp()===b.comp?(b.theme=d.themeDatePick,b.force=!0):e.isArray(d.highDatesAlt)&&e.inArray(b.iso,d.highDatesAlt)>-1?b.theme=d.themeDateHighAlt:e.isArray(d.highDates)&&e.inArray(b.iso,d.highDates)>-1?b.theme=d.themeDateHigh:e.isArray(d.highDays)&&e.inArray(h,d.highDays)>-1?b.theme=d.themeDayHigh:e.isArray(d.highDatesRec)&&!0===b.rectheme&&(b.theme=d.themeDateHighRec):b.theme=d.themeDatePick}else b.theme=d.disabledState;return b},_cal_prev_next:function(t){var a=this,n=this.options,o="ui-datebox-";e(a._spf("<div class='{class}'><a href='#'>{name}</a></div>",{class:o+"gridplus text-right button-datebox"+(a.__("isRTL")?"-rtl":""),name:a._spf(n.s.cal.nextMonth,{text:a.__("nextMonth"),icon:n.calNextMonthIcon})})).prependTo(t).find("a").addClass(function(){switch(a.baseMode){case"jqm":return n.btnCls+n.themeDate+n.icnCls+n.calNextMonthIcon;case"bootstrap":case"bootstrap4":return n.btnCls+n.themeDate+" btn-cal-month pull-"+(a.__("isRTL")?"left":"right");default:return null}}).on(n.clickEventAlt,function(e){return e.preventDefault(),e.stopPropagation(),a.calNext&&(!1===a.calBackDate&&(a.calBackDate=new Date(a.theDate.getTime())),a.theDate.getDate()>28&&a.theDate.setDate(1),a._offset("m",1)),!1}),e(a._spf("<div class='{class}'><a href='#'>{name}</a></div>",{class:o+"gridminus text-left button-datebox"+(a.__("isRTL")?"-rtl":""),name:a._spf(n.s.cal.prevMonth,{text:a.__("prevMonth"),icon:n.calPrevMonthIcon})})).prependTo(t).find("a").addClass(function(){switch(a.baseMode){case"jqm":return n.btnCls+n.themeDate+n.icnCls+n.calPrevMonthIcon;case"bootstrap":case"bootstrap4":return n.btnCls+n.themeDate+" btn-cal-month pull-"+(a.__("isRTL")?"right":"left");default:return null}}).on(n.clickEventAlt,function(e){return e.preventDefault(),e.stopPropagation(),a.calPrev&&(!1===a.calBackDate&&(a.calBackDate=new Date(a.theDate.getTime())),a.theDate.getDate()>28&&a.theDate.setDate(1),a._offset("m",-1)),!1})},_cal_pickers:function(t,a,n){var o,i,s,r=this,d=this.options,l="ui-datebox-",c=(new Date).get(0),u=e("<div>").addClass("ui-datebox-cal-pickers");for(d.calNoHeader&&d.calUsePickersIcons&&u.addClass("ui-datebox-pickicon"),u.i=e("<fieldset>").appendTo(u),u.a=e("<select>").appendTo(u.i),u.b=e("<select>").appendTo(u.i),s=0;s<=11;s++)u.a.append(e("<option value='"+s+"'"+(t===s?" selected='selected'":"")+">"+r.__("monthsOfYear")[s]+"</option>"));for(o=d.calYearPickMin<1?(d.calYearPickRelative?a:c)+d.calYearPickMin:d.calYearPickMin<1800?(d.calYearPickRelative?a:c)-d.calYearPickMin:"NOW"===d.calYearPickMin?n[0]:d.calYearPickMin,i=d.calYearPickMax<1800?(d.calYearPickRelative?a:c)+d.calYearPickMax:"NOW"===d.calYearPickMax?n[0]:d.calYearPickMax,s=o;s<=i;s++)u.b.append(e("<option value='"+s+"'"+(a===s?" selected='selected'":"")+">"+s+"</option>"));switch(u.a.on("change",function(){!1===r.calBackDate&&(r.calBackDate=new Date(r.theDate.getTime())),r.theDate.setD(1,e(this).val()),r.theDate.get(1)!==parseInt(e(this).val(),10)&&r.theDate.setD(2,0),!1!==r.calBackDate&&r._t({method:"displayChange",selectedDate:r.calBackDate,shownDate:r.theDate,thisChange:"p",thisChangeAmount:null}),r.refresh()}),u.b.on("change",function(){!1===r.calBackDate&&(r.calBackDate=new Date(r.theDate.getTime())),r.theDate.setD(0,e(this).val()),r.theDate.get(1)!==parseInt(u.a.val(),10)&&r.theDate.setD(2,0),!1!==r.calBackDate&&r._t({method:"displayChange",selectedDate:r.calBackDate,shownDate:r.theDate,thisChange:"p",thisChangeAmount:null}),r.refresh()}),r.baseMode){case"bootstrap":case"jqueryui":u.i.find("select").addClass("form-control input-sm").css({marginTop:"3px",float:"left"}).first().css({width:"60%"}).end().last().css({width:"40%"}),d.calNoHeader&&d.calUsePickersIcons?r.d.intHTML.find("."+l+"gridheader").append(u):u.appendTo(r.d.intHTML);break;case"bootstrap4":u.i.find("select").addClass("form-control form-control-sm input-sm").css({marginTop:"3px",float:"left",height:"auto"}).first().css({width:"60%"}).end().last().css({width:"40%"}),d.calNoHeader&&d.calUsePickersIcons?r.d.intHTML.find("."+l+"gridheader").append(u):u.appendTo(r.d.intHTML);break;case"jqm":u.i.controlgroup({mini:!0,type:"horizontal"}),u.i.find("select").selectmenu({nativeMenu:!0}),u.i.find(".ui-controlgroup-controls").css({marginRight:"auto",marginLeft:"auto",width:"100%",display:"table"}),u.i.find(".ui-select").first().css({width:"60%"}).end().last().css({width:"40%"}),d.calNoHeader&&d.calUsePickersIcons&&u.i.css({padding:"0 10px 5px 10px"}),u.appendTo(r.d.intHTML)}},_cal_date_list:function(t){var a,n,o=this,i=this.options,s=e("<div>").addClass("ui-datebox-pickcontrol");for(s.a=e("<select name='pickdate'></select>").appendTo(s),s.a.append("<option value='false' selected='selected'>"+o.__("calDateListLabel")+"</option>"),a=0;a<i.calDateList.length;a++)s.a.append(e(o._spf("<option value='{0}'>{1}</option>",i.calDateList[a])));switch(s.a.on("change",function(){n=e(this).val().split("-"),o.theDate=new o._date(n[0],n[1]-1,n[2],0,0,0,0),o._t({method:"doset"})}),o.baseMode){case"jqm":s.find("select").selectmenu({mini:!0,nativeMenu:!0});break;case"bootstrap":case"bootstrap4":s.find("select").addClass("form-control input-sm")}s.appendTo(t)},_dbox_run:function(){var e=this,t=this.drag,a=parseInt(6.09+142.8*Math.pow(Math.E,-.039*t.cnt),10);t.didRun=!0,t.cnt++,e._offset(t.target[0],t.target[1],!1),e._dbox_run_update(),e.runButton=setTimeout(function(){e._dbox_run()},a)},_dbox_run_update:function(t){var a=this,n=this.options,o=a.theDate.getTime()-a.initDate.getTime(),i="durationbox"===n.mode,s=a._dur(o<0?0:o);o<0&&(a.lastDuration=0,i&&a.theDate.setTime(a.initDate.getTime())),i&&(a.lastDuration=o/1e3,!1!==n.minDur&&a.theDate.getEpoch()-a.initDate.getEpoch()<n.minDur&&(a.theDate=new Date(a.initDate.getTime()+1e3*n.minDur),a.lastDuration=n.minDur,s=a._dur(1e3*n.minDur)),!1!==n.maxDur&&a.theDate.getEpoch()-a.initDate.getEpoch()>n.maxDur&&(a.theDate=new Date(a.initDate.getTime()+1e3*n.maxDur),a.lastDuration=n.maxDur,s=a._dur(1e3*n.maxDur))),!0!==t&&!0!==i&&(a._check(),"datebox"===n.mode&&a.d.intHTML.find(".ui-datebox-header").find("h4").text(a._formatter(a.__("headerFormat"),a.theDate)),n.useSetButton&&(!1===a.dateOK?a.setBut.addClass(n.disabledState):a.setBut.removeClass(n.disabledState))),a.d.divIn.find("input").each(function(){switch(e(this).data("field")){case"y":e(this).val(a.theDate.get(0));break;case"m":e(this).val(a.theDate.get(1)+1);break;case"d":e(this).val(i?s[0]:a.theDate.get(2));break;case"h":i?e(this).val(s[1]):12===a.__("timeFormat")?e(this).val(a.theDate.get12hr()):e(this).val(a.theDate.get(3));break;case"i":i?e(this).val(s[2]):e(this).val(a._zPad(a.theDate.get(4)));break;case"M":e(this).val(a.__("monthsOfYearShort")[a.theDate.get(1)]);break;case"a":e(this).val(a.__("meridiem")[a.theDate.get(3)>11?1:0]);break;case"s":i?e(this).val(s[3]):e(this).val(a._zPad(a.theDate.get(5)))}}),!0===a.__("useArabicIndic")&&a._doIndic()},_dbox_vhour:function(t){var a,n=this,o=this.options,i=[25,0],s=[25,0];return!1===o.validHours||(e.inArray(n.theDate.getHours(),o.validHours)>-1||(a=n.theDate.getHours(),e.each(o.validHours,function(){(a<this?1:-1)===t?i[0]>Math.abs(this-a)&&(i=[Math.abs(this-a),parseInt(this,10)]):s[0]>Math.abs(this-a)&&(s=[Math.abs(this-a),parseInt(this,10)])}),void(0!==i[1]?n.theDate.setHours(i[1]):n.theDate.setHours(s[1]))))},_dbox_enter:function(t){var a,n=this,o=0;if("M"===t.data("field")&&(a=e.inArray(t.val(),n.__("monthsOfYearShort")))>-1&&n.theDate.setMonth(a),""!==t.val()&&0===t.val().toString().search(/^[0-9]+$/))switch(t.data("field")){case"y":n.theDate.setD(0,parseInt(t.val(),10));break;case"m":n.theDate.setD(1,parseInt(t.val(),10)-1);break;case"d":n.theDate.setD(2,parseInt(t.val(),10)),o+=86400*parseInt(t.val(),10);break;case"h":n.theDate.setD(3,parseInt(t.val(),10)),o+=3600*parseInt(t.val(),10);break;case"i":n.theDate.setD(4,parseInt(t.val(),10)),o+=60*parseInt(t.val(),10);break;case"s":n.theDate.setD(5,parseInt(t.val(),10)),o+=parseInt(t.val(),10)}"durationbox"===this.options.mode&&n.theDate.setTime(n.initDate.getTime()+1e3*o),setTimeout(function(){n.refresh()},150)},_dbox_button:function(t,a,n){var o=this,i=this.options;return e("<div>").addClass("ui-datebox-datebox-button").addClass(i.btnCls+i.themeButton).addClass(function(){switch(o.baseMode){case"jqm":case"bootstrap":case"bootstrap4":return"fas fa-"+(t>0?"chevron-up":"chevron-down");default:return null}}).data({field:a,amount:n*t}).append(function(){switch(o.baseMode){case"jqueryui":return e("<span>").addClass(i.icnCls+(t>0?i.calNextMonthIcon:i.calPrevMonthIcon));default:return null}})},_fbox_pos:function(){var t,a,n,o=0,i=this,s="bootstrap4"===i.baseMode?5:0,r=this.d.intHTML.find(".ui-datebox-flipcontent").innerHeight();i.d.intHTML.find(".ui-datebox-flipcenter").each(function(){a=e(this),o=-1*(r/2-a.innerHeight()/2-3)+s,a.css("top",o)}),i.d.intHTML.find("ul").each(function(){a=e(this),r=a.parent().innerHeight(),n=a.find("li").first(),t=a.find("li").last().offset().top-a.find("li").first().offset().top,n.css("marginTop",-1*((t-r)/2+n.outerHeight()))})},_fbox_series:function(e,t,a,n){for(var o,i,s=this.options,r="h"===a?24:60,d=[[e.toString(),e]],l=1;l<=t;l++)o=e+l*s.durationSteppers[a],i=e-l*s.durationSteppers[a],d.unshift([o.toString(),o]),i>-1?d.push([i.toString(),i]):n?d.push([(r+i).toString(),i]):d.push(["",-1]);return d},_fbox_mktxt:{y:function(e){return this.theDate.get(0)+e},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return this.__("monthsOfYearShort")[t.get(1)]},d:function(e){var t=this.options;if(!1===t.rolloverMode||void 0!==t.rolloverMode.d&&!1===t.rolloverMode.d){var a=this.theDate.get(2),n=32-this.theDate.copy([0],[0,0,32,13]).getDate(),o=a+e;return o<1?n+o:o%n>0?o%n:n}return this.theDate.copy([0,0,e]).get(2)},h:function(e){var t=this.theDate.copy([0,0,0,e]);return 12===this.__("timeFormat")?t.get12hr():t.get(3)},i:function(e){return this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))},s:function(e){return this._zPad(this.theDate.copy([0,0,0,0,0,e]).get(5))}},_sbox_pos:function(){var t,a,n,o,i,s=this;s.d.intHTML.find("div.ui-datebox-sliderow-int").each(function(){a=e(this),o=a.parent().outerWidth(),t=a.outerWidth(),n=s.__("isRTL")?a.find("div").last():a.find("div").first(),i=a.find("div").length*n.outerWidth(),t>0&&(i=t),n.css("marginLeft",(i-o)/2*-1)})},_sbox_mktxt:{y:function(e){return["slideyear",this.theDate.get(0)+e]},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return["slidemonth",this.__("monthsOfYearShort")[t.get(1)]]},d:function(e){var t=this.theDate.copy([0,0,e]);return["slideday",t.get(2)+"<br /><span class='ui-datebox-slidewday'>"+this.__("daysOfWeekShort")[t.getDay()]+"</span>"]},h:function(e){var t=this.theDate.copy([0,0,0,e]);return["slidehour",12===this.__("timeFormat")?this._formatter("%-I<span class='ui-datebox-slidewday'>%p</span>",t):t.get(3)]},i:function(e){return["slidemins",this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))]}}})}(jQuery),function(e){e(document).ready(function(){e("[data-role='datebox']").each(function(){e(this).datebox()})})}(jQuery);